(()=>{"use strict";var e,t,o,n,r,a,i,l=Object.freeze({gain:.5,numSamples:256});function c(e){t.src=e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}new Uint8Array(l.numSamples/2);var u,f,d,h,v,y,g=function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"rgba(".concat(e,",").concat(t,",").concat(o,",").concat(n,")")};function b(e,t){u=e.getContext("2d"),f=e.width,d=e.height,h=function(e,t,o,n,r){var a,i=e.createLinearGradient(0,0,0,r),l=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return s(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}([{percent:0,color:"red"},{percent:.25,color:"purple"},{percent:.5,color:"darkblue"},{percent:.75,color:"black"},{percent:1,color:"black"}]);try{for(l.s();!(a=l.n()).done;){var c=a.value;i.addColorStop(c.percent,c.color)}}catch(e){l.e(e)}finally{l.f()}return i}(u,0,0,0,d),v=t,y=new Uint8Array(v.fftSize/2)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=m(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var S,C,O={showGradient:!0,showBars:!0,showCircles:!0,showNoise:!1,showInvert:!1,showEmboss:!1,showFrequency:!0,showWave:!1},P=function(){return e=function e(t,o,n,r,a,i,l,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=o,this.innerColorR=n,this.innerColorG=r,this.innerColorB=a,this.outerColorR=i,this.outerColorG=l,this.outerColorB=c},t=[{key:"update",value:function(e){this.audioData=e}},{key:"draw",value:function(e,t,o){var n=t/2;e.save(),e.globalAlpha=.5;for(var r=0;r<this.audioData.length;r++){var a=this.audioData[r]/255,i=a*n;e.beginPath(),e.fillStyle=g(this.innerColorR,this.innerColorG,this.innerColorB,.34-a/3),e.arc(this.x,this.y,i,0,2*Math.PI,!1),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=g(this.outerColorR,this.outerColorG,this.outerColorB,.34-a/3),e.arc(this.x,this.y,1.5*i,0,2*Math.PI,!1),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=g(255,255,0,.5-a/5),e.arc(this.x,this.y,.5*i,0,2*Math.PI,!1),e.fill(),e.closePath()}e.restore()}}],t&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),k=Object.freeze({sound1:"media/Neon Cheese irritation.mp3"});function q(s,u,f){var d,h,v;S=new P(u.x,u.y,u.innerColorR,u.innerColorG,u.innerColorB,u.outerColorR,u.outerColorG,u.outerColorB),C=new P(f.x,f.y,f.innerColorR,f.innerColorG,f.innerColorB,f.outerColorR,f.outerColorG,f.outerColorB),d=k.sound1,h=window.AudioContext||window.webkitAudioContext,e=new h,t=new Audio,c(d),o=e.createMediaElementSource(t),(n=e.createAnalyser(t)).fftSize=l.numSamples,(r=e.createGain()).gain.value=l.gain,o.connect(n),n.connect(r),r.connect(e.destination),(a=e.createBiquadFilter()).type="lowshelf",a.gain.value=l.gain,o.connect(n),n.connect(a),a.connect(e.destination),(i=e.createBiquadFilter()).type="highshelf",i.gain.value=l.gain,o.connect(n),n.connect(i),i.connect(e.destination),console.log("init called bluh bluh"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((v=function(){return 185*Math.random()+35})(),",").concat(v(),",").concat(v(),",1)")));var y=document.querySelector("canvas");!function(o){document.querySelector("#btn-fs").onclick=function(e){var t;console.log("goFullscreen() called"),(t=o).requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()};var n=document.querySelector("#btn-play");n.onclick=function(o){"suspended"==e.state&&e.resume(),"no"==o.target.dataset.playing?(t.play(),o.target.dataset.playing="yes"):(t.pause(),o.target.dataset.playing="no")};var l=document.querySelector("#slider-volume"),s=document.querySelector("#volumeLabel");l.oninput=function(e){var t;t=e.target.value,t=Number(t),r.gain.value=t,s.innerHTML=Math.round(e.target.value/2*100)},l.dispatchEvent(new Event("input"));var u=document.querySelector("#slider-treble"),f=document.querySelector("#trebleLabel");u.oninput=function(e){var t;t=e.target.value,t=Number(t),i.gain.value=10*t,f.innerHTML=Math.round(e.target.value/2*100)},u.dispatchEvent(new Event("input"));var d=document.querySelector("#slider-bass"),h=document.querySelector("#bassLabel");d.oninput=function(e){var t;t=e.target.value,t=Number(t),a.gain.value=10*t,h.innerHTML=Math.round(e.target.value/2*100)},d.dispatchEvent(new Event("input")),document.querySelector("#trackSelect").onchange=function(e){c(e.target.value),console.log(e.target.value),"yes"==n.dataset.playing&&n.dispatchEvent(new MouseEvent("click"))};var v=document.querySelector("#typeSelect");v.onclick=function(e){0==v.selectedIndex?(O.showFrequency=!0,O.showWave=!1):1==v.selectedIndex&&(O.showFrequency=!1,O.showWave=!0)};var y=document.querySelector("#cb-gradient");y.checked=!0;var g=document.querySelector("#cb-bars");g.checked=!0;var b=document.querySelector("#cb-circles");b.checked=!0;var m=document.querySelector("#cb-noise");m.checked=!1;var p=document.querySelector("#cb-invert");p.checked=!1;var w=document.querySelector("#cb-emboss");p.checked=!1,y.addEventListener("change",(function(){1==this.checked?(O.showGradient=!0,console.log("Gradient is On")):(O.showGradient=!1,console.log("Gradient is Off"))})),g.addEventListener("change",(function(){1==this.checked?(O.showBars=!0,console.log("bars is On")):(O.showBars=!1,console.log("bars is Off"))})),b.addEventListener("change",(function(){1==this.checked?(O.showCircles=!0,console.log("circles is On")):(O.showCircles=!1,console.log("circles is Off"))})),m.addEventListener("change",(function(){1==this.checked?(O.showNoise=!0,console.log("Noise is On")):(O.showNoise=!1,console.log("Noise is Off"))})),p.addEventListener("change",(function(){1==this.checked?(O.showInvert=!0,console.log("Invert is On")):(O.showInvert=!1,console.log("Invert is Off"))})),w.addEventListener("change",(function(){1==this.checked?(O.showEmboss=!0,console.log("Emboss is On")):(O.showEmboss=!1,console.log("Emboss is Off"))}))}(y),b(y,n),E()}function E(){setTimeout((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(1==e.showFrequency?v.getByteFrequencyData(y):v.getByteTimeDomainData(y),u.save(),u.fillStyle="black",u.globalAlpha=.1,u.fillRect(0,0,f,d),u.restore(),e.showGradient&&(u.save(),u.fillStyle=h,u.globalAlpha=.3,u.fillRect(0,0,f,d),u.restore()),e.showBars){var n=(f-4*y.length-10)/y.length;u.save(),u.fillStyle="rgba(255,255,255,0.50)",u.strokeStyle="rgba(0,0,0,0.50)";for(var r=0;r<y.length;r++)u.fillRect(5+r*(n+4),356-y[r],n,200),u.strokeRect(5+r*(n+4),356-y[r],n,200);u.restore()}if(e.showCircles){var a=d/4;u.save(),u.globalAlpha=.5;for(var i=0;i<y.length;i++){var l=y[i]/255,c=l*a;u.beginPath(),u.fillStyle=g(255,0,180,.34-l/3),u.arc(f/2,d/2,c,0,2*Math.PI,!1),u.fill(),u.closePath(),u.beginPath(),u.fillStyle=g(0,0,200,.1-l/10),u.arc(f/2,d/2,1.5*c,0,2*Math.PI,!1),u.fill(),u.closePath(),u.beginPath(),u.fillStyle=g(200,0,0,.5-l/5),u.arc(f/2,d/2,.5*c,0,2*Math.PI,!1),u.fill(),u.closePath(),u.restore()}u.restore()}t.update(y),t.draw(u,d,y),o.update(y),o.draw(u,d,y);for(var s=u.getImageData(0,0,f,d),b=s.data,m=b.length,p=s.width,w=0;w<m;w+=4)if(e.showNoise&&Math.random()<.02&&(b[w]=b[w+1]=b[w+2]=0,b[w]=180,b[w+1]=180,b[w+2]=180),1==e.showInvert){var S=b[w],C=b[w+1],O=b[w+2];b[w]=255-S,b[w+1]=255-C,b[w+2]=255-O}if(1==e.showEmboss)for(var P=0;P<m;P++)P%4!=3&&(b[P]=127+2*b[P]-b[P+4]-b[P+4*p]);u.putImageData(s,0,0)}(O,S,C),E()}),1e3/60)}function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function F(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function I(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?F(Object(o),!0).forEach((function(t){R(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):F(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function R(e,t,o){return(t=function(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=j(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}window.onload=function(){console.log("window.onload called"),fetch("data/av-data.json").then((function(e){if(!e.ok)throw new Error("Failed to load JSON data");return e.json()})).then((function(e){console.log("JSON data loaded:",e);var t=e.audioFiles.map((function(e){var t=new Audio("media/".concat(e.fileName));return t.preload="auto",I(I({},e),{},{src:t.src})})),o=e.spriteData1,n=e.spriteData2;console.log("Preloading completed:",t),console.log("Sprite data loaded:",o,n);var r=document.querySelector("#trackSelect");e.audioFiles.forEach((function(e,t){var o=document.createElement("option");o.value="media/"+e.fileName,o.textContent=e.trackName,"perfect-fart.mp3"===e.fileName&&(o.selected=!0),r.appendChild(o)})),q(0,o,n)})).catch((function(e){console.error("Error loading JSON data:",e)}))}})();